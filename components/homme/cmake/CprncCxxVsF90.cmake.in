# Run cprnc on each of the output files against the target
# Note: we mix @ and $ notation, since at configure time we only
#       resolve @ variables. The remaning ones will be resolve by
#       cmake when the script is run with 'cmake -P CprncCxxVsF90.cmake'
FOREACH (NC_FILE_NAME @NC_OUTPUT_FILES@)
  EXECUTE_PROCESS (COMMAND  @CPRNC_BINARY@ @CXX_DIR@/${NC_FILE_NAME} @F90_DIR@/${NC_FILE_NAME}
                   RESULT_VARIABLE ERROR_CODE)

  # If cprnc does not return 0, then the test failed
  IF (${RESULT_VARIABLE} NOT EQUAL 0)
    MESSAGE (FATAL_ERROR "Test did not succeed")
  ENDIF()
ENDFOREACH()
